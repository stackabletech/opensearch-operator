---
image:
  repository: oci.stackable.tech/sdp/opensearch-dashboards
  tag: 3.1.0-stackable0.0.0-dev
serviceAccount:
  create: false
  name: simple-opensearch-serviceaccount
config:
  opensearch_dashboards.yml:
    server:
      ssl:
        enabled: true
        certificate: /stackable/opensearch-dashboards/config/tls/tls.crt
        key: /stackable/opensearch-dashboards/config/tls/tls.key
    opensearch:
      username: kibanaserver
      ssl:
        verificationMode: full
        certificateAuthorities:
          - /stackable/opensearch-dashboards/config/tls/ca.crt
    opensearch_security:
      cookie:
        secure: true
extraEnvs:
  - name: OPENSEARCH_HOSTS
    valueFrom:
      configMapKeyRef:
        name: simple-opensearch
        key: OPENSEARCH_HOSTS
  - name: OPENSEARCH_PASSWORD
    valueFrom:
      secretKeyRef:
        name: opensearch-credentials
        key: kibanaserver
extraVolumes:
  - name: tls
    ephemeral:
      volumeClaimTemplate:
        metadata:
          annotations:
            secrets.stackable.tech/class: tls
            secrets.stackable.tech/scope: service=opensearch-dashboards
        spec:
          storageClassName: secrets.stackable.tech
          accessModes:
            - ReadWriteOnce
          resources:
            requests:
              storage: "1"
extraVolumeMounts:
  - mountPath: /stackable/opensearch-dashboards/config/tls
    name: tls
  - mountPath: /stackable/opensearch-dashboards/config/opensearch_dashboards.yml
    name: config
    subPath: opensearch_dashboards.yml
podSecurityContext:
  fsGroup: 1000
